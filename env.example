# Application Settings
APP_NAME=FastAPI Forge
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=development
SECRET_KEY=your-secret-key-here-change-in-production

# Server Configuration
HOST=0.0.0.0
PORT=8000
RELOAD=true
WORKERS=4

# Database Configuration (nested)
DATABASE__URL=postgresql+asyncpg://user:password@localhost:5432/dbname  # For PostgreSQL (async)
# Alternative database URLs:
# DATABASE__URL=mysql+aiomysql://user:password@localhost:3306/dbname  # MySQL 8.0+ (async)
# DATABASE__URL=mysql+pymysql://user:password@localhost:3306/dbname   # MySQL (PyMySQL)
# DATABASE__URL=sqlite+aiosqlite:///./app.db  # SQLite (async)

# Redis Configuration (nested, for caching/sessions)
REDIS__URL=redis://localhost:6379/0
REDIS__MAX_CONNECTIONS=10
REDIS__DEFAULT_TTL=300
REDIS__NAMESPACE=fastapi-forge

# CORS Settings
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# JWT Settings
JWT_SECRET_KEY=your-jwt-secret-key-here-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=30

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASSWORD=your-email-password
EMAIL_FROM=noreply@example.com

# External API Keys
OPENAI_API_KEY=your-openai-api-key
STRIPE_API_KEY=your-stripe-api-key

# Logging
LOG_LEVEL=INFO
LOG_FILE=app.log

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# File Upload
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
UPLOAD_DIR=./uploads

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# Storage Service Configuration (nested)
# Storage type: local, s3, oss
STORAGE__TYPE=local

# Common storage settings
STORAGE__BUCKET=my-bucket
STORAGE__REGION=us-east-1
STORAGE__ENDPOINT=https://s3.amazonaws.com
STORAGE__PUBLIC_BASE_URL=https://cdn.example.com

# AWS S3 Configuration
STORAGE__AWS_ACCESS_KEY_ID=your-aws-access-key
STORAGE__AWS_SECRET_ACCESS_KEY=your-aws-secret-key
STORAGE__S3_SSE=AES256
STORAGE__S3_ACL=private

# Aliyun OSS Configuration
STORAGE__OSS_ACCESS_KEY_ID=your-oss-access-key
STORAGE__OSS_ACCESS_KEY_SECRET=your-oss-secret-key

# Local Storage Configuration
STORAGE__LOCAL_BASE_PATH=/tmp/storage

# Storage Advanced Settings
STORAGE__MAX_RETRY_ATTEMPTS=3
STORAGE__TIMEOUT=30
STORAGE__ENABLE_SSL=true
STORAGE__PRESIGN_MAX_SIZE=104857600  # 100MB in bytes
STORAGE__VALIDATION_ENABLED=false
STORAGE__MAX_FILE_SIZE=104857600  # 100MB in bytes
STORAGE__ALLOWED_TYPES=["image/jpeg","image/png","application/pdf"]

# Messaging / Kafka Configuration (nested)
# Provider and driver
KAFKA__DRIVER=confluent  # or aiokafka

# Core Kafka
KAFKA__BOOTSTRAP_SERVERS=localhost:9092
KAFKA__CLIENT_ID=fastapi-forge
# Optional transactional producer (confluent only)
# KAFKA__TRANSACTIONAL_ID=fastapi-forge-txn-1

# TLS
KAFKA__TLS_ENABLE=false
# KAFKA__TLS_CA_LOCATION=/path/to/ca.pem
# KAFKA__TLS_CERTIFICATE=/path/to/cert.pem
# KAFKA__TLS_KEY=/path/to/key.pem
KAFKA__TLS_VERIFY=true

# SASL (set when broker requires auth)
# KAFKA__SASL_MECHANISM=PLAIN  # or SCRAM-SHA-256 / SCRAM-SHA-512
# KAFKA__SASL_USERNAME=username
# KAFKA__SASL_PASSWORD=password

# Producer tuning
KAFKA__PRODUCER_ACKS=all
KAFKA__PRODUCER_ENABLE_IDEMPOTENCE=true
KAFKA__PRODUCER_COMPRESSION_TYPE=zstd
KAFKA__PRODUCER_LINGER_MS=5
KAFKA__PRODUCER_BATCH_SIZE=65536
KAFKA__PRODUCER_MAX_IN_FLIGHT=5
KAFKA__PRODUCER_MESSAGE_TIMEOUT_MS=120000
KAFKA__PRODUCER_SEND_WAIT_S=5.0
KAFKA__PRODUCER_DELIVERY_WAIT_S=30.0

# Consumer tuning
KAFKA__CONSUMER_ENABLE_AUTO_COMMIT=false
KAFKA__CONSUMER_AUTO_OFFSET_RESET=latest
KAFKA__CONSUMER_MAX_POLL_INTERVAL_MS=300000
KAFKA__CONSUMER_SESSION_TIMEOUT_MS=45000
KAFKA__CONSUMER_FETCH_MIN_BYTES=1
KAFKA__CONSUMER_FETCH_MAX_BYTES=52428800
KAFKA__CONSUMER_COMMIT_EVERY_N=100
KAFKA__CONSUMER_COMMIT_INTERVAL_MS=2000
KAFKA__CONSUMER_MAX_CONCURRENCY=1
KAFKA__CONSUMER_INFLIGHT_MAX=1000

# Retry policy
KAFKA__RETRY_LAYERS=retry.5s:5000,retry.1m:60000,retry.10m:600000
KAFKA__RETRY_DLQ_SUFFIX=dlq
